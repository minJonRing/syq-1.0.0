(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f6948c16"],{"0619":function(t,e,n){"use strict";var a=n("c02a"),r=n.n(a);r.a},"2f21":function(t,e,n){"use strict";var a=n("79e5");t.exports=function(t,e){return!!t&&a((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"386b":function(t,e,n){var a=n("5ca1"),r=n("79e5"),i=n("be13"),o=/"/g,s=function(t,e,n,a){var r=String(i(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(a).replace(o,"&quot;")+'"'),s+">"+r+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),a(a.P+a.F*r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)}},"55dd":function(t,e,n){"use strict";var a=n("5ca1"),r=n("d8e8"),i=n("4bf8"),o=n("79e5"),s=[].sort,l=[1,2,3];a(a.P+a.F*(o((function(){l.sort(void 0)}))||!o((function(){l.sort(null)}))||!n("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(i(this)):s.call(i(this),r(t))}})},7367:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-cooperative-enterprise"},[n("div",{staticClass:"box"},[n("div",{staticClass:"edits"},[n("el-button",{attrs:{type:"primary"},on:{click:t.handleDialong}},[t._v("上传logo")])],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.list,border:""}},[n("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"img",label:"LOGO",width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{attrs:{src:t.row.link,alt:t.row.name}})]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"sort",label:"排序"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{placement:"top"},model:{value:e.row.isDelete,callback:function(n){t.$set(e.row,"isDelete",n)},expression:"scope.row.isDelete"}},[n("p",[t._v("确定删除？")]),t._v(" "),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.isDelete=!1}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return n.stopPropagation(),t.handleDelete(e)}}},[t._v("确定")])],1),t._v(" "),n("el-button",{attrs:{slot:"reference",size:"small"},slot:"reference"},[t._v("删除")])],1),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return n.stopPropagation(),t.handleEdit(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),n("div",{staticClass:"pages"},[n("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next","page-sizes":[5,10,20,50],total:t.pages.total,"page-size":t.pages.pageSize,"current-page":t.pages.current},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"提示",visible:t.dialong},on:{"update:visible":function(e){t.dialong=e}}},[n("el-form",{ref:"form",attrs:{"label-position":"left",model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"公司名称"}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入公司名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"三位动画"}},[n("img-show",{ref:"logo",attrs:{url:t.form.link}})],1),t._v(" "),n("el-form-item",{attrs:{label:"排序"}},[n("el-input-number",{attrs:{min:1,max:1e3,label:"描述文字"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialong=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)],1)},r=[],i=(n("55dd"),n("b54a"),n("7f7f"),n("96cf"),n("3b8d")),o=n("91b6"),s=n("b775"),l={getList:function(t){return Object(s["a"])({url:"/logo/list",method:"get",params:t})},add:function(t){return Object(s["a"])({url:"/logo/add",method:"post",data:t})},edit:function(t){return Object(s["a"])({url:"/logo/edit",method:"post",data:t})}},c=l,u={name:"HomeCooperativeEnterprise",data:function(){return{list:[],pages:{current:1,total:0,pageSize:10},dialong:!1,loading:!1,form:{name:"",link:"",sort:1}}},watch:{dialong:function(t){t||(this.form={name:"",link:"",sort:1})}},mounted:function(){this.handleSearch()},methods:{query:function(){var t=this;this.loading=!0;var e=Object.assign({},this.pages);c.getList(e).then((function(e){t.list=t.reList(e.data.list),t.pages.total=e.data.total,t.loading=!1}))},reList:function(t){var e=[];for(var n in t)e.push(Object.assign({isDelete:!1},t[n]));return e},handleSearch:function(){this.query()},handleDialong:function(){this.dialong=!0},handleUpload:function(t){var e=new FormData;return e.append("file",t),Object(o["a"])(e)},handleSubmit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$refs.logo.$refs.file.files[0],!e){t.next=6;break}return t.next=4,this.handleUpload(e);case 4:n=t.sent,this.form.link=n.data[0];case 6:this.form.id?c.edit(this.form).then((function(t){a.$message.success(t.msg),200===t.code&&(a.dialong=!1,a.query())})):c.add(this.form).then((function(t){a.$message.success(t.msg),200===t.code&&(a.dialong=!1,a.query())}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleEdit:function(t){this.dialong=!0,this.form={id:t.id,name:t.name,link:t.link,sort:t.sort}},handleDelete:function(t){var e=this,n=t.$index;c.edit({id:t.row.id,isDelete:!0}).then((function(t){e.$message.success("删除成功"),e.list[n].isDelete=!1,1===e.list.length&&e.pages.current>1&&(e.pages.current=e.pages.current-1),e.query()}))},handleSizeChange:function(t){this.pages.current=1,this.pages.pageSize=t,this.query()},handleCurrentChange:function(t){this.pages.current=t,this.query()}}},d=u,f=(n("0619"),n("2877")),p=Object(f["a"])(d,a,r,!1,null,"204b4788",null);e["default"]=p.exports},"91b6":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n("b775");function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"img";return Object(a["a"])({url:"/upload/"+e,method:"post",data:t})}},b54a:function(t,e,n){"use strict";n("386b")("link",(function(t){return function(e){return t(this,"a","href",e)}}))},c02a:function(t,e,n){}}]);